<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="_csrf" th:content="${_csrf.token}" />
	<meta name="_csrf_header" th:content="${_csrf.headerName}" />

	<!-- Custom CSS -->
	<link rel="stylesheet" th:href="@{css/base.css}">

	<!-- jQuery -->
	<script th:src="@{js/jquery-3.6.0.min.js}"></script>

	<!-- FontAwesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
		integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

	<title>Chase Game</title>
</head>

<body>

	<div class="game-container">
		<div class="game-board">
			<div th:each="row : ${gameBoard.gameBoardRows}">
				<div th:each="cell : ${row}" th:attr="data-x=${cell.coordinates.y}, data-y=${cell.coordinates.x}"
					class="bo cell"></div>
			</div>
		</div>
	</div>
	<div class="d-flex">
		<div class="w-25 d-flex flex-column align-items-center">
			<h3>Timer</h3>
			<div id="timer"></div>
		</div>

		<div class="w-75">

			<div class="d-flex">
				<div class="w-50">
					<div class="d-flex flex-column align-items-center">
						<h3>Score</h3>
						<div class="score-container text-center">
							<span id="game-score">0</span>
						</div>
					</div>
				</div>
				<div class="w-50 d-flex flex-column align-items-center">
					<h4 class="text-center">Game Log</h4>
					<div class="game-log">
						<ul class="list-group" id="messages">
						</ul>
					</div>
					<div>
						<a th:href="@{/leaderboards}" class="btn btn-primary">View Leaderboards</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Modal -->
	<div class="modal fade" id="endGameModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="endGameModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="end-game modal-header bg-gradient" id="container-modal-header">
					<h5 class="end-game modal-title" id="endGameModalTitle"></h5>
				</div>
				<div class="end-game modal-body" id="endGameModalBody">
				</div>
				<div class="end-game modal-footer">
					<a th:href="@{/}" type="button" class="btn btn-secondary">Main Menu</a>
					<button onClick="window.location.reload();" type="button" class="btn btn-primary">Play
						Again!</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Boostrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
		</script>


	<script th:inline="javascript">
		const ROWS = /*[[${gameBoard.totalRows}]]*/ 5;
		const COLS = /*[[${gameBoard.totalColumns}]]*/ 5;
		const GAME_SETUP = /*[[${gameSetup}]]*/ {};
	</script>

	<script type="module" th:src="@{game/js/game.js}"></script>

</body>

</html>